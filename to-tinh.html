<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G·ª≠i B√© Y√™u</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fce4ec; /* M√†u n·ªÅn h·ªìng nh·∫°t */
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            text-align: center;
        }

        /* C√°c m√†n h√¨nh hi·ªÉn th·ªã */
        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            transition: all 0.5s ease;
        }

        /* M√†n h√¨nh 1: C√¢u h·ªèi */
        #question-screen {
            display: flex;
            z-index: 10;
        }

        h1 {
            color: #d81b60;
            font-size: 2.5rem;
            margin-bottom: 30px;
        }

        .buttons {
            display: flex;
            gap: 20px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        #yes-btn {
            background-color: #ff4081;
            color: white;
            font-weight: bold;
        }

        #no-btn {
            background-color: #e0e0e0;
            color: #333;
        }

        /* M√†n h√¨nh 2: ·∫¢nh bu·ªìn */
        #sad-screen {
            background-color: #fff;
            z-index: 20;
        }
        
        #sad-screen img {
            max-width: 80%;
            max-height: 60vh;
            border-radius: 10px;
        }

        #sad-screen p {
            font-size: 1.5rem;
            color: #555;
            margin-top: 20px;
        }

        /* M√†n h√¨nh 3: Tr√°i tim v√† L·ªùi ch√∫c */
        #gift-screen {
            background-color: #000; /* N·ªÅn ƒëen ƒë·ªÉ n·ªïi b·∫≠t hi·ªáu ·ª©ng tr√°i tim */
            z-index: 30;
            color: white;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .message-content {
            position: relative;
            z-index: 40;
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 15px;
            max-width: 80%;
        }

        .message-content h2 {
            font-family: 'Courier New', Courier, monospace; /* Font ki·ªÉu code */
            color: #ff4081;
            font-size: 2rem;
        }
        
        .message-content p {
            font-size: 1.2rem;
            line-height: 1.6;
        }

    </style>
</head>
<body>

    <div id="question-screen" class="screen">
        <h1>Em c√≥ y√™u anh kh√¥ng? ‚ù§Ô∏è</h1>
        <div class="buttons">
            <button id="yes-btn" onclick="acceptLove()">C√≥ d·∫° ‚ù§Ô∏è</button>
            <button id="no-btn" onclick="rejectLove()">Kh√¥ng nha</button>
        </div>
    </div>

    <div id="sad-screen" class="screen">
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcDdtZ2JiZDR0a3lvMDF4OG1uy3p6eG5ql3l5a3l5a3l5a3l5a3l5&rid=giphy.gif" alt="Sad Sticker" id="sad-img">
        <p>Hic... Bu·ªìn qu√° d·ª£... üò≠</p>
    </div>

    <div id="gift-screen" class="screen">
        <canvas id="heart-canvas"></canvas>
        <div class="message-content">
            <h2>Code T√¨nh Y√™u C·ªßa Anh</h2>
            <p>
                C·∫£m ∆°n b√© ƒë√£ ƒë·ªìng √Ω nha! <br>
                Tr√°i tim n√†y d√†nh t·∫∑ng ri√™ng cho em.<br>
                Ch√∫c em m·ªôt ng√†y th·∫≠t vui v·∫ª v√† lu√¥n y√™u ƒë·ªùi!<br>
                Y√™u em nhi·ªÅu! ‚ù§Ô∏è
            </p>
        </div>
    </div>

    <script>
        // Bi·∫øn l∆∞u tr·∫°ng th√°i
        let yesBtnSize = 1.2; // K√≠ch th∆∞·ªõc font ch·ªØ ban ƒë·∫ßu
        let yesBtnPadding = 15; // Padding ban ƒë·∫ßu
        let countNo = 0; // ƒê·∫øm s·ªë l·∫ßn b·∫•m kh√¥ng

        // H√†m khi b·∫•m "Kh√¥ng"
        function rejectLove() {
            countNo++;
            
            // 1. Hi·ªán m√†n h√¨nh bu·ªìn
            document.getElementById('question-screen').style.display = 'none';
            document.getElementById('sad-screen').style.display = 'flex';

            // 2. T·ª± ƒë·ªông quay l·∫°i sau 2 gi√¢y (2000ms)
            setTimeout(() => {
                document.getElementById('sad-screen').style.display = 'none';
                document.getElementById('question-screen').style.display = 'flex';
                
                // 3. Logic l√†m n√∫t "C√≥" to l√™n v√† n√∫t "Kh√¥ng" b√© ƒëi/m·∫•t ch·ªØ
                makeYesBigger();
            }, 2000); // Th·ªùi gian ch·ªù 2 gi√¢y
        }

        // H√†m l√†m n√∫t C√≥ to l√™n
        function makeYesBigger() {
            const yesBtn = document.getElementById('yes-btn');
            const noBtn = document.getElementById('no-btn');

            // TƒÉng k√≠ch th∆∞·ªõc n√∫t C√≥
            yesBtnSize += 0.5;
            yesBtnPadding += 10;
            yesBtn.style.fontSize = yesBtnSize + 'rem';
            yesBtn.style.padding = yesBtnPadding + 'px ' + (yesBtnPadding * 2) + 'px';

            // ƒê·ªïi n·ªôi dung n√∫t C√≥ cho g·∫Øt h∆°n
            const texts = ["C√≥ d·∫° ‚ù§Ô∏è", "Y√™u ch·ªõ sao ko!", "Ch·∫Øc ch·∫Øn l√† c√≥!", "B·∫•m ƒë√¢y n√®!", "ƒê·ª´ng h√≤ng tho√°t!"];
            if (countNo < texts.length) {
                yesBtn.innerText = texts[countNo];
            } else {
                yesBtn.innerText = "Y√äU ANH ƒêI M√Ä!!!";
            }

            // L√†m n√∫t Kh√¥ng m·ªù d·∫ßn ho·∫∑c ch·∫°y m·∫•t (·ªû ƒë√¢y m√¨nh l√†m n√∫t Kh√¥ng b√© ƒëi)
            let currentOpacity = parseFloat(window.getComputedStyle(noBtn).opacity);
            noBtn.style.opacity = currentOpacity - 0.2;
            
            // N·∫øu b·∫•m nhi·ªÅu qu√° th√¨ ·∫©n lu√¥n n√∫t Kh√¥ng
            if (countNo >= 5) {
                noBtn.style.display = 'none';
            }
        }

        // H√†m khi b·∫•m "C√≥"
        function acceptLove() {
            document.getElementById('question-screen').style.display = 'none';
            document.getElementById('gift-screen').style.display = 'flex';
            
            // K√≠ch ho·∫°t hi·ªáu ·ª©ng tr√°i tim
            startHeartAnimation();
        }

        /* --- CODE HI·ªÜU ·ª®NG TR√ÅI TIM (CANVAS) --- */
        function startHeartAnimation() {
            var canvas = document.getElementById("heart-canvas");
            var ctx = canvas.getContext("2d");
            
            var width = canvas.width = window.innerWidth;
            var height = canvas.height = window.innerHeight;
            
            var particles = [];

            // T·∫°o h√¨nh tr√°i tim t·ª´ c√¥ng th·ª©c to√°n h·ªçc
            function heartFunction(t) {
                return {
                    x: 16 * Math.pow(Math.sin(t), 3),
                    y: -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t))
                };
            }

            // Kh·ªüi t·∫°o c√°c h·∫°t
            for (let i = 0; i < 400; i++) { // S·ªë l∆∞·ª£ng h·∫°t
                let t = Math.random() * Math.PI * 2;
                let pos = heartFunction(t);
                particles.push({
                    x: width / 2 + pos.x * 15, // Scale h√¨nh tr√°i tim
                    y: height / 2 + pos.y * 15,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2,
                    size: Math.random() * 2 + 1,
                    color: '#ff4081'
                });
            }

            function animate() {
                ctx.fillStyle = "rgba(0, 0, 0, 0.05)"; // T·∫°o v·ªát m·ªù (hi·ªáu ·ª©ng ƒëu√¥i)
                ctx.fillRect(0, 0, width, height);

                particles.forEach(p => {
                    // V·∫Ω h·∫°t
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.fill();

                    // Di chuy·ªÉn h·∫°t rung rinh quanh v·ªã tr√≠ g·ªëc ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng "ƒë·∫≠p"
                    // ·ªû ƒë√¢y l√†m ƒë∆°n gi·∫£n l√† cho n√≥ l·∫•p l√°nh
                    p.size = Math.random() * 3; 
                });

                requestAnimationFrame(animate);
            }
            animate();
        }
        
        // Resize canvas khi ƒë·ªïi k√≠ch th∆∞·ªõc m√†n h√¨nh
        window.addEventListener('resize', function(){
            var canvas = document.getElementById("heart-canvas");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
